{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { EditprodumodalComponent } from '../editprodumodal/editprodumodal.component';\nexport let ListaProdutosComponent = class ListaProdutosComponent {\n  constructor(produtoServico, router, modalService) {\n    this.produtoServico = produtoServico;\n    this.router = router;\n    this.modalService = modalService;\n    this.tituloFormulario = '';\n    this.produtos = [];\n  }\n  ngOnInit() {\n    this.obterProdutos();\n  }\n  obterProdutos() {\n    this.produtoServico.listar().subscribe(produtos => {\n      this.produtos = produtos;\n    }, error => {\n      console.error('Erro ao obter produto', error);\n    });\n  }\n  removerProduto(codigo) {\n    if (codigo !== undefined) {\n      this.produtoServico.excluir(codigo).subscribe(() => {\n        console.log('Produto removido com sucesso!');\n        this.obterProdutos();\n      }, error => {\n        console.error('Erro ao remover produto', error);\n      });\n    } else {\n      console.error('Código do produto é undefined.');\n    }\n  }\n  abrirModalEditProduto(produto) {\n    if (produto) {\n      const initialState = {\n        produto: {\n          ...produto\n        }\n      };\n      this.modalRef = this.modalService.show(EditprodumodalComponent, {\n        initialState\n      });\n      if (this.modalRef.content?.Atualizado) {\n        this.modalRef.content.Atualizado.subscribe(() => {\n          this.obterProdutos();\n          this.modalRef.hide();\n        });\n      }\n    }\n  }\n  formatarCnpj(cnpj) {\n    return cnpj.replace(/(\\d{2})(\\d{3})(\\d{3})(\\d{4})(\\d{2})/, '$1.$2.$3/$4-$5');\n  }\n};\nListaProdutosComponent = __decorate([Component({\n  selector: 'app-lista-produtos',\n  templateUrl: './lista-produtos.component.html',\n  styleUrls: ['./lista-produtos.component.css']\n})], ListaProdutosComponent);","map":{"version":3,"names":["Component","EditprodumodalComponent","ListaProdutosComponent","constructor","produtoServico","router","modalService","tituloFormulario","produtos","ngOnInit","obterProdutos","listar","subscribe","error","console","removerProduto","codigo","undefined","excluir","log","abrirModalEditProduto","produto","initialState","modalRef","show","content","Atualizado","hide","formatarCnpj","cnpj","replace","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Eduardo\\Documents\\GitHub\\PetCafe\\apppetcafe\\src\\app\\components\\lista-produtos\\lista-produtos.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Produto } from 'src/app/Model/Produto';\nimport { ProdutosService } from 'src/app/Servico/ProdutoServico/produtos.service';\nimport { EditprodumodalComponent } from '../editprodumodal/editprodumodal.component';\n\n@Component({\n  selector: 'app-lista-produtos',\n  templateUrl: './lista-produtos.component.html',\n  styleUrls: ['./lista-produtos.component.css'],\n})\nexport class ListaProdutosComponent implements OnInit {\n  formulario: any;\n  tituloFormulario: string = '';\n  produtos: Produto[] = [];\n  modalRef!: BsModalRef;\n\n  constructor(\n    private produtoServico: ProdutosService,\n    private router: Router\n    private modalService: BsModalService\n  ) {}\n\n  ngOnInit(): void {\n    this.obterProdutos();\n  }\n\n  obterProdutos(): void {\n    this.produtoServico.listar().subscribe(\n      (produtos) => {\n        this.produtos = produtos;\n      },\n      (error) => {\n        console.error('Erro ao obter produto', error);\n      }\n    );\n  }\n  removerProduto(codigo: number | undefined): void {\n    if (codigo !== undefined) {\n      this.produtoServico.excluir(codigo).subscribe(\n        () => {\n          console.log('Produto removido com sucesso!');\n          this.obterProdutos();\n        },\n        (error) => {\n          console.error('Erro ao remover produto', error);\n        }\n      );\n    } else {\n      console.error('Código do produto é undefined.');\n    }\n  }\n  \n  abrirModalEditProduto(produto: Produto): void {\n    if (produto) {\n      const initialState = { produto: { ...produto } };\n\n      this.modalRef = this.modalService.show(EditprodumodalComponent, {\n        initialState,\n      });\n\n      if (this.modalRef.content?.Atualizado) {\n        this.modalRef.content.Atualizado.subscribe(() => {\n          this.obterProdutos();\n\n          this.modalRef.hide();\n        });\n      }\n    }\n  }\n  \n\n  formatarCnpj(cnpj: string): string {\n    return cnpj.replace(\n      /(\\d{2})(\\d{3})(\\d{3})(\\d{4})(\\d{2})/,\n      '$1.$2.$3/$4-$5'\n    );\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAIjD,SAASC,uBAAuB,QAAQ,4CAA4C;AAO7E,WAAMC,sBAAsB,GAA5B,MAAMA,sBAAsB;EAMjCC,YACUC,cAA+B,EAC/BC,MAAc,EACdC,YAA4B;IAF5B,KAAAF,cAAc,GAAdA,cAAc;IACd,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,YAAY,GAAZA,YAAY;IAPtB,KAAAC,gBAAgB,GAAW,EAAE;IAC7B,KAAAC,QAAQ,GAAc,EAAE;EAOrB;EAEHC,QAAQA,CAAA;IACN,IAAI,CAACC,aAAa,EAAE;EACtB;EAEAA,aAAaA,CAAA;IACX,IAAI,CAACN,cAAc,CAACO,MAAM,EAAE,CAACC,SAAS,CACnCJ,QAAQ,IAAI;MACX,IAAI,CAACA,QAAQ,GAAGA,QAAQ;IAC1B,CAAC,EACAK,KAAK,IAAI;MACRC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC/C,CAAC,CACF;EACH;EACAE,cAAcA,CAACC,MAA0B;IACvC,IAAIA,MAAM,KAAKC,SAAS,EAAE;MACxB,IAAI,CAACb,cAAc,CAACc,OAAO,CAACF,MAAM,CAAC,CAACJ,SAAS,CAC3C,MAAK;QACHE,OAAO,CAACK,GAAG,CAAC,+BAA+B,CAAC;QAC5C,IAAI,CAACT,aAAa,EAAE;MACtB,CAAC,EACAG,KAAK,IAAI;QACRC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MACjD,CAAC,CACF;KACF,MAAM;MACLC,OAAO,CAACD,KAAK,CAAC,gCAAgC,CAAC;;EAEnD;EAEAO,qBAAqBA,CAACC,OAAgB;IACpC,IAAIA,OAAO,EAAE;MACX,MAAMC,YAAY,GAAG;QAAED,OAAO,EAAE;UAAE,GAAGA;QAAO;MAAE,CAAE;MAEhD,IAAI,CAACE,QAAQ,GAAG,IAAI,CAACjB,YAAY,CAACkB,IAAI,CAACvB,uBAAuB,EAAE;QAC9DqB;OACD,CAAC;MAEF,IAAI,IAAI,CAACC,QAAQ,CAACE,OAAO,EAAEC,UAAU,EAAE;QACrC,IAAI,CAACH,QAAQ,CAACE,OAAO,CAACC,UAAU,CAACd,SAAS,CAAC,MAAK;UAC9C,IAAI,CAACF,aAAa,EAAE;UAEpB,IAAI,CAACa,QAAQ,CAACI,IAAI,EAAE;QACtB,CAAC,CAAC;;;EAGR;EAGAC,YAAYA,CAACC,IAAY;IACvB,OAAOA,IAAI,CAACC,OAAO,CACjB,qCAAqC,EACrC,gBAAgB,CACjB;EACH;CACD;AAnEY5B,sBAAsB,GAAA6B,UAAA,EALlC/B,SAAS,CAAC;EACTgC,QAAQ,EAAE,oBAAoB;EAC9BC,WAAW,EAAE,iCAAiC;EAC9CC,SAAS,EAAE,CAAC,gCAAgC;CAC7C,CAAC,C,EACWhC,sBAAsB,CAmElC"},"metadata":{},"sourceType":"module","externalDependencies":[]}